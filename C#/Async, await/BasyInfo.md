## Как работает async await с примером? ##


`async` и `await` - это ключевые слова в C#, которые позволяют писать асинхронный код с использованием Task-based асинхронной модели (TAP). Они позволяют разрабатывать асинхронные операции таким образом, чтобы они не блокировали главный поток выполнения и позволяли эффективно использовать ресурсы системы.

Вот как работает `async` и `await`:

1. **Ключевое слово `async`**: Ключевое слово `async` указывает, что метод содержит асинхронную операцию и может содержать оператор `await`. Метод, помеченный как `async`, является асинхронным и может быть вызван асинхронно.

2. **Оператор `await`**: Оператор `await` используется внутри асинхронного метода для ожидания завершения другой асинхронной операции. Когда оператор `await` достигается, управление передается обратно вызывающему коду, позволяя главному потоку выполнения продолжить свою работу. При этом асинхронный метод приостанавливается до завершения асинхронной операции, которую он ожидает. Оператор `await` может использоваться только внутри асинхронного метода.

3. **Объекты `Task` и `Task<T>`**: Асинхронные операции обычно возвращают `Task` или `Task<T>`. `Task` представляет асинхронную операцию без результата, тогда как `Task<T>` представляет асинхронную операцию, которая возвращает значение типа T.

Вот пример использования `async` и `await`:

```csharp
public async Task<string> DownloadDataAsync()
{
    // Some asynchronous operations
    await Task.Delay(1000); // Ожидание 1 секунды (имитация загрузки данных)

    // Продолжение работы после завершения ожидания
    return "Data downloaded successfully";
}

public async Task Main()
{
    Console.WriteLine("Start");

    string result = await DownloadDataAsync(); // Ожидание завершения асинхронной операции

    Console.WriteLine(result);
    Console.WriteLine("End");
}
```

В этом примере у нас есть метод `DownloadDataAsync()`, который является асинхронным и имитирует загрузку данных путем задержки выполнения на 1 секунду с использованием `Task.Delay()`. Затем метод возвращает строку "Data downloaded successfully".

В методе `Main()`, который также является асинхронным, мы вызываем `DownloadDataAsync()` с использованием оператора `await`, который ожидает завершения асинхронной операции и возвращает результат. После загрузки данных мы выводим результат на консоль.

Когда мы запускаем этот код, мы увидим следующий вывод:

```
Start
Data downloaded successfully
End
```

Обратите внимание, что при выполнении асинхронной операции, такой как `Task.Delay()`, управление возвращается на главный поток выполнения, который может продолжить свою работу, не блокируясь до завершения операции. Это позволяет эффективно использовать ресурсы системы и избегать "зависания" приложения.
