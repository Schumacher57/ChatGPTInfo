### **–ß—Ç–æ —Ç–∞–∫–æ–µ Mock-–æ–±—ä–µ–∫—Ç—ã?**  
Mock-–æ–±—ä–µ–∫—Ç—ã (–∏–ª–∏ –ø—Ä–æ—Å—Ç–æ "–º–æ–∫–∏") ‚Äî —ç—Ç–æ –ø–æ–¥–¥–µ–ª—å–Ω—ã–µ (—Ñ–µ–π–∫–æ–≤—ã–µ) –æ–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ **–±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**. –û–Ω–∏ –∑–∞–º–µ–Ω—è—é—Ç –Ω–∞—Å—Ç–æ—è—â–∏–µ –æ–±—ä–µ–∫—Ç—ã, —á—Ç–æ–±—ã:  

‚úÖ **–ò–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–π –∫–æ–¥** (Unit-—Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –≤–µ—â—å)  
‚úÖ **–ó–∞–¥–∞—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)  
‚úÖ **–ò–∑–±–µ–∂–∞—Ç—å —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö, API, —Ñ–∞–π–ª–∞–º–∏ –∏ —Ç. –¥.**  

---

## **1. –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä Mock-–æ–±—ä–µ–∫—Ç–∞**
–î–æ–ø—É—Å—Ç–∏–º, —É –Ω–∞—Å –µ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `ICalculator`, –∫–æ—Ç–æ—Ä—ã–π —É–º–µ–µ—Ç —Å–∫–ª–∞–¥—ã–≤–∞—Ç—å —á–∏—Å–ª–∞:  
```csharp
public interface ICalculator
{
    int Add(int a, int b);
}
```
–í —Ä–µ–∞–ª—å–Ω–æ–º –∫–æ–¥–µ –æ–Ω –º–æ–≥ –±—ã –±—ã—Ç—å —Å–ª–æ–∂–Ω—ã–º, –Ω–æ –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –º—ã **–ø–æ–¥–º–µ–Ω–∏–º –µ–≥–æ –º–æ–∫-–æ–±—ä–µ–∫—Ç–æ–º**.  

### **–°–æ–∑–¥–∞—ë–º –º–æ–∫ –∏ –∑–∞–¥–∞—ë–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ**
```csharp
using Moq;
using Xunit;

public class CalculatorTests
{
    [Fact]
    public void Test_Add_Method()
    {
        // –°–æ–∑–¥–∞—ë–º –º–æ–∫ –æ–±—ä–µ–∫—Ç–∞ ICalculator
        var mockCalculator = new Mock<ICalculator>();

        // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –º–µ—Ç–æ–¥ Add: –ø—É—Å—Ç—å –æ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 10, –µ—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω—ã (5, 5)
        mockCalculator.Setup(calc => calc.Add(5, 5)).Returns(10);

        // –ò—Å–ø–æ–ª—å–∑—É–µ–º mock –∫–∞–∫ –Ω–∞—Å—Ç–æ—è—â–∏–π –æ–±—ä–µ–∫—Ç
        int result = mockCalculator.Object.Add(5, 5);

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º–µ—Ç–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–∂–∏–¥–∞–ª–æ—Å—å
        Assert.Equal(10, result);
    }
}
```
üìå **–ß—Ç–æ —Ç—É—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?**  
- `Mock<ICalculator>` ‚Äî —Å–æ–∑–¥–∞—ë–º –º–æ–∫ –æ–±—ä–µ–∫—Ç–∞ `ICalculator`.  
- `Setup(calc => calc.Add(5, 5)).Returns(10);` ‚Äî –≥–æ–≤–æ—Ä–∏–º –º–æ–∫—É, —á—Ç–æ –µ—Å–ª–∏ –ø–µ—Ä–µ–¥–∞—Ç—å `5, 5`, –æ–Ω –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å `10`.  
- `mockCalculator.Object` ‚Äî —ç—Ç–æ –ø–æ–¥–¥–µ–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.  
- `Assert.Equal(10, result);` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–∂–∏–¥–∞–Ω–∏—è–º.  

---

## **2. –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞**
–î–æ–ø—É—Å—Ç–∏–º, —É –Ω–∞—Å –µ—Å—Ç—å –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –≤—ã–∑–≤–∞—Ç—å `Add`, –Ω–æ –º—ã –Ω–µ –∑–Ω–∞–µ–º, –∫–∞–∫ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏:  
```csharp
public class MathService
{
    private readonly ICalculator _calculator;

    public MathService(ICalculator calculator)
    {
        _calculator = calculator;
    }

    public int ComputeSum(int a, int b)
    {
        return _calculator.Add(a, b);
    }
}
```
–ú—ã –º–æ–∂–µ–º **–Ω–µ —Ç–æ–ª—å–∫–æ –∑–∞–¥–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –Ω–æ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –±—ã–ª –ª–∏ –º–µ—Ç–æ–¥ –≤—ã–∑–≤–∞–Ω**:
```csharp
public class MathServiceTests
{
    [Fact]
    public void Test_ComputeSum_Calls_Add()
    {
        var mockCalculator = new Mock<ICalculator>();

        // –°–æ–∑–¥–∞—ë–º —Å–µ—Ä–≤–∏—Å, –ø–µ—Ä–µ–¥–∞–≤–∞—è –≤ –Ω–µ–≥–æ –º–æ–∫-–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
        var mathService = new MathService(mockCalculator.Object);

        // –í—ã–∑—ã–≤–∞–µ–º –º–µ—Ç–æ–¥
        mathService.ComputeSum(2, 3);

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ Add(2,3) –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –±—ã–ª –≤—ã–∑–≤–∞–Ω
        mockCalculator.Verify(calc => calc.Add(2, 3), Times.Once);
    }
}
```
üìå **–ß—Ç–æ —Ç—É—Ç –ø—Ä–æ–≤–µ—Ä—è–µ–º?**  
- `mockCalculator.Verify(calc => calc.Add(2, 3), Times.Once);` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ `Add(2,3)` –≤—ã–∑—ã–≤–∞–ª—Å—è **—Ä–æ–≤–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑**.  

‚úÖ **–ï—Å–ª–∏ –º–µ—Ç–æ–¥ –Ω–µ –≤—ã–∑—ã–≤–∞–ª—Å—è –∏–ª–∏ –≤—ã–∑—ã–≤–∞–ª—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, —Ç–µ—Å—Ç —É–ø–∞–¥—ë—Ç.**  

---

## **3. –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–∞–∑–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**
–ú–æ–∫–∏ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω–∏ –ø–æ-—Ä–∞–∑–Ω–æ–º—É —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–ª–∏ –Ω–∞ —Ä–∞–∑–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã:
```csharp
mockCalculator.Setup(calc => calc.Add(It.Is<int>(x => x > 0), It.IsAny<int>()))
             .Returns(100);
```
üìå **–†–∞–∑–±–∏—Ä–∞–µ–º**:  
- `It.Is<int>(x => x > 0)` ‚Äî –º–µ—Ç–æ–¥ `Add` –¥–æ–ª–∂–µ–Ω —Å—Ä–∞–±–æ—Ç–∞—Ç—å, **–µ—Å–ª–∏ –ø–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç –±–æ–ª—å—à–µ 0**.  
- `It.IsAny<int>()` ‚Äî –≤—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å **–ª—é–±—ã–º —á–∏—Å–ª–æ–º**.  
- –í–æ–∑–≤—Ä–∞—â–∞–µ–º `100`, –µ—Å–ª–∏ —É—Å–ª–æ–≤–∏–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç.  

#### **–ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞ —Å —Ä–∞–∑–Ω—ã–º–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏**
```csharp
[Fact]
public void Test_Add_Different_Inputs()
{
    var mockCalculator = new Mock<ICalculator>();

    // –ï—Å–ª–∏ –ø–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç –±–æ–ª—å—à–µ 0, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º 100
    mockCalculator.Setup(calc => calc.Add(It.Is<int>(x => x > 0), It.IsAny<int>())).Returns(100);

    Assert.Equal(100, mockCalculator.Object.Add(1, 5));  // ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ 1 > 0
    Assert.Equal(100, mockCalculator.Object.Add(10, 20)); // ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ 10 > 0
    Assert.NotEqual(100, mockCalculator.Object.Add(-1, 5)); // ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ -1 –Ω–µ –±–æ–ª—å—à–µ 0
}
```
---

## **4. –í—ã–±—Ä–∞—Å—ã–≤–∞–µ–º –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤ –º–æ–∫–µ**
–î–æ–ø—É—Å—Ç–∏–º, –Ω–∞—à `ICalculator` –¥–æ–ª–∂–µ–Ω –≤—ã–∑—ã–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –¥–µ–ª–µ–Ω–∏–∏ –Ω–∞ 0:
```csharp
public interface ICalculator
{
    int Divide(int a, int b);
}
```
–ù–∞—Å—Ç—Ä–æ–∏–º –º–æ–∫ —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω –≤—ã–±—Ä–∞—Å—ã–≤–∞–ª –∏—Å–∫–ª—é—á–µ–Ω–∏–µ:
```csharp
var mockCalculator = new Mock<ICalculator>();

mockCalculator.Setup(calc => calc.Divide(It.IsAny<int>(), 0))
              .Throws(new DivideByZeroException());
```
üìå –¢–µ–ø–µ—Ä—å, –µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ –≤—ã–∑–æ–≤–µ—Ç `Divide` —Å `0` –≤–æ –≤—Ç–æ—Ä–æ–º –∞—Ä–≥—É–º–µ–Ω—Ç–µ, –æ–Ω –ø–æ–ª—É—á–∏—Ç –æ—à–∏–±–∫—É.  

#### **–ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è**
```csharp
[Fact]
public void Test_Divide_By_Zero()
{
    var mockCalculator = new Mock<ICalculator>();
    mockCalculator.Setup(calc => calc.Divide(It.IsAny<int>(), 0))
                  .Throws(new DivideByZeroException());

    var calculator = mockCalculator.Object;

    Assert.Throws<DivideByZeroException>(() => calculator.Divide(10, 0));
}
```
‚úÖ **–≠—Ç–æ—Ç —Ç–µ—Å—Ç –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –ø—Ä–∏ –¥–µ–ª–µ–Ω–∏–∏ –Ω–∞ 0 –º–µ—Ç–æ–¥ –≤—ã–∑–æ–≤–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ.**

---

## **5. Callbacks: –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –º–µ—Ç–æ–¥–∞**
–ï—Å–ª–∏ –Ω–∞–º –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –º–æ–∫ **–Ω–µ –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–ª –∑–Ω–∞—á–µ–Ω–∏—è, –∞ –≤—ã–ø–æ–ª–Ω—è–ª –∫–∞–∫–æ–µ-—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ**, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Callback`:
```csharp
mockCalculator.Setup(calc => calc.Add(It.IsAny<int>(), It.IsAny<int>()))
              .Callback<int, int>((x, y) => Console.WriteLine($"Add –≤—ã–∑–≤–∞–Ω —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ {x} –∏ {y}"))
              .Returns(0);
```
–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –º–µ—Ç–æ–¥–∞ `Add` –±—É–¥–µ—Ç –≤—ã–≤–æ–¥–∏—Ç—å—Å—è —Ç–µ–∫—Å—Ç.

---

## **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ**
–ú–æ–∫–∏ ‚Äî –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤.  
–ú—ã —Ä–∞–∑–æ–±—Ä–∞–ª–∏:  
‚úÖ **–ö–∞–∫ –∑–∞–¥–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –º–æ–∫–∞** (`Setup(...).Returns(...)`)  
‚úÖ **–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞** (`Verify(...)`)  
‚úÖ **–ö–∞–∫ –∑–∞–¥–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**  
‚úÖ **–ö–∞–∫ –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è** (`Throws(...)`)  
‚úÖ **–ö–∞–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–¥ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –º–æ–∫–∞** (`Callback(...)`)  

**–ï—Å–ª–∏ —Ç–µ–±–µ –Ω—É–∂–Ω—ã –ø—Ä–∏–º–µ—Ä—ã —Å–ª–æ–∂–Ω–µ–µ ‚Äî —Å–ø—Ä–∞—à–∏–≤–∞–π!** üòÉ